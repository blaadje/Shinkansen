(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{327:function(e,a,t){e.exports=t(590)},533:function(e,a){},590:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),o=t.n(c),i=t(46),l=t(55),s=t(8),u=t.n(s),m=t(9),p=t(18),d=t(135),f=t.n(d),E=t(302),h=t.n(E),b=t(271),g=t(626),y=t(627),v=t(628),O=t(631),R=t(17),I="BEGIN_API_CALL",w="API_CALL_ERROR",k="SIGNUP_SUCCESS",x="SIGNIN_SUCCESS",j="SIGNOUT_SUCCESS",_="RESET_SUCCESS";function S(){return{type:I}}function N(){return{type:w}}var C=t(193),P=t.n(C),A=(t(337),t(339),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_FIREBASE_APP_ID});P.a.initializeApp(A);var L=P.a,D=function(e){return{type:"LOAD_OCTOKIT",payload:e}},T=function(e,a){return function(t){return u.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(S()),n.next=4,u.a.awrap(L.auth().createUserWithEmailAndPassword(e,a));case 4:return n.next=6,u.a.awrap(L.auth().onAuthStateChanged(function(e){e.sendEmailVerification()}));case 6:L.auth().onAuthStateChanged(function(e){e?(L.database().ref("users/"+e.uid).set({displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,email:e.email}),t({type:k,payload:"Your account was successfully created! Now you need to verify your e-mail address, please go check your inbox."})):t({type:"SIGNUP_ERROR",payload:"Something went wrong, we couldn't create your account. Please try again."})}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t(N()),t({type:"SIGNUP_ERROR",payload:"Something went wrong, we couldn't create your account. Please try again."});case 13:case"end":return n.stop()}},null,null,[[0,9]])}},U=function(e,a,t){return function(n){return u.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:try{n(S()),L.auth().signInWithEmailAndPassword(e,a).then(function(a){var r=a.user;L.database().ref("users/"+r.uid).set({displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified,phoneNumber:r.phoneNumber,isAnonymous:r.isAnonymous,email:e}),r.emailVerified?(console.log("IF",r.emailVerified),n({type:x}),t()):(console.log("ELSE",r.emailVerified),n({type:"EMAIL_NOT_VERIFIED",payload:"You haven't verified your e-mail address."}))}).catch(function(){n(N()),n({type:"SIGNIN_ERROR",payload:"Invalid login credentials"})})}catch(c){n(N()),n({type:"SIGNIN_ERROR",payload:"Invalid login credentials"})}case 1:case"end":return r.stop()}})}},B=function(){return function(e){return u.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e(S()),a.next=4,u.a.awrap(L.auth().signOut());case 4:e({type:j}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),e(N()),e({type:"SIGNOUT_ERROR",payload:"Error, we were not able to log you out. Please try again."});case 11:case"end":return a.stop()}},null,null,[[0,7]])}},F=function(e){return function(a){return u.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(S()),t.next=4,u.a.awrap(L.auth().sendPasswordResetEmail(e));case 4:a({type:_,payload:"Check your inbox. We've sent you a secured reset link by e-mail."}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),a(N()),a({type:"RESET_ERROR",payload:t.t0});case 11:case"end":return t.stop()}},null,null,[[0,7]])}},V=t(47),W=function(e,a,t){var r=Object(n.useState)({}),c=Object(p.a)(r,2),o=c[0],i=c[1],l=Object(n.useState)({email:"",password:""}),s=Object(p.a)(l,2),u=s[0],d=s[1],f=Object(n.useState)(!1),E=Object(p.a)(f,2),h=E[0],b=E[1];Object(n.useEffect)(function(){0===Object.keys(o).length&&h&&(e(),d({email:"",password:""}),b(!1))},[o,t,h,e]);return[u,function(e){e.persist(),d(function(a){return Object(m.a)({},a,Object(V.a)({},e.target.name,e.target.value))})},function(e){e&&e.preventDefault(),b(!0),i(a(u,t))},o]};function G(e,a){var t={};if(e.email||(t.emailIsEmpty="You need to enter your e-mail address"),e.email&&!/\S+@\S+\.\S+/.test(e.email)&&(t.emailFormatInvalid="Your e-mail format doesn't seem right"),!a){e.password||(t.passIsEmpty="You need a password");e.password&&!e.password.match(/^(?=.*[A-Z])(?=.*[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~])(?=.*[0-9])(?=.*[a-z]).{8,250}$/)&&(t.passIsStrong="You need a stronger password")}return t}var M=t(645),Y=t(624),z=t(96),K=t(646),H=t(630),J=t(52),$=t.n(J),X=t(20),Z=Object(b.a)(function(e){return{form:{paddingBottom:e.spacing(4)},divider:{position:"relative",overflow:"visible","&:after":{content:'"Or"',color:"#8b6baf",position:"absolute",background:"white",padding:"0 20px",top:"-11px",left:"50%",transform:"translateX(-50%)"}}}});var q=Object(R.b)(function(e){return{userId:e.firebaseReducer.auth.uid,authMsg:e.authReducer.authMsg,loading:e.apiStatusReducer.apiCallsInProgress>0}},function(e){return{signup:function(a,t){return e(T(a,t))},signin:function(a,t,n){return e(U(a,t,n))},signout:function(){return e(B())},resetPassword:function(a){return e(F(a))}}})(function(e){var a=e.signup,t=e.signin,c=e.resetPassword,o=e.authMsg,i=e.history,l=e.loading,s=(e.userId,Z()),d=Object(n.useState)(!1),E=Object(p.a)(d,2),b=E[0],R=E[1],I=Object(n.useState)(!1),w=Object(p.a)(I,2),k=w[0],x=w[1],j=Object(X.useFirebase)(),_=W(function(){b?a(N.email,N.password):k?c(N.email):t(N.email,N.password,function(){return i.push("/")})},G,k),S=Object(p.a)(_,4),N=S[0],C=S[1],P=S[2],A=S[3];return r.a.createElement(M.a,{style:{background:"linear-gradient(to bottom,#654a86,#534292)"},height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(Y.a,null,r.a.createElement(M.a,{p:6},r.a.createElement(M.a,{pb:3,width:"380px"},r.a.createElement(z.a,{color:"secondary",variant:"h6"},k?"Reset password":b?"Create an account":"Sign in to your account")),r.a.createElement(g.a,{onClick:function(){var e;return u.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(j.login({provider:"github",type:"popup",scopes:["repo_deployment","admin:repo_hook"]}));case 2:return e=a.sent,a.abrupt("return",j.updateProfile(Object(m.a)({},e.additionalUserInfo,{accessToken:e.credential.accessToken})));case 4:case"end":return a.stop()}})},variant:"contained",color:"secondary",startIcon:r.a.createElement(f.a,null)},"Sign in with GitHub"),r.a.createElement(M.a,{paddingY:5},r.a.createElement(y.a,{className:s.divider})),o&&r.a.createElement("p",{className:"auth-message"},o),r.a.createElement("form",{onSubmit:P,noValidate:!0},r.a.createElement(M.a,{pb:4},r.a.createElement(v.a,{className:s.form},r.a.createElement(K.a,{error:A.emailIsEmpty||A.emailFormatInvalid,id:"email",name:"email",placeholder:"Email address",helperText:A&&A.emailIsEmpty||A&&A.emailFormatInvalid,defaultValue:N.email,onChange:C,InputProps:{startAdornment:r.a.createElement(H.a,{position:"start"},r.a.createElement($.a,{color:"secondary"}))}})),!k&&r.a.createElement(v.a,null,r.a.createElement(K.a,{error:A.passIsStrong||A.passIsEmpty,id:"password",name:"password",placeholder:"Password",type:"password",autoComplete:"current-password",onChange:C,defaultValue:N.password,helperText:A&&A.passIsStrong||A&&A.passIsEmpty,InputProps:{startAdornment:r.a.createElement(H.a,{position:"start"},r.a.createElement(h.a,{color:"secondary"}))}}))),r.a.createElement(M.a,{display:"flex",justifyContent:"space-between"},r.a.createElement(g.a,{variant:"contained",color:"secondary",type:"submit"},l?r.a.createElement(O.a,{color:"secondary"}):k?"Reset password":b?"Create account":"Sign in"),!b&&!k&&r.a.createElement(g.a,{variant:"text",onClick:function(){return x(!0)}},"Forgot password?"),k&&r.a.createElement(g.a,{variant:"contained",onClick:function(){return x(!1)}},"Back to sign in")))),r.a.createElement(M.a,{p:4,display:"flex",bgcolor:"primary.light",alignItems:"center",borderTop:"1px solid #dddddd",justifyContent:"space-between"},r.a.createElement(z.a,{component:"span",color:"secondary"},b?"Already have an account?":"New to shinkansen?"),r.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(){R(!b),k&&x(!1)}},b?"Sign in":"Create an account"))))}),Q=t(633),ee=t(634),ae=t(635),te=t(632),ne=t(320),re=t(303),ce=t.n(re),oe=Object(b.a)(function(e){return{menu:{boxShadow:"none",borderBottom:"2px solid ".concat(e.palette.secondary.main)},menuButton:{marginRight:e.spacing(2)},title:{display:"block"},sectionDesktop:{display:"flex",marginLeft:"auto"}}});var ie=Object(R.b)(null,function(e){return{signout:function(){return e(B())}}})(function(e){var a=e.signout,t=oe(),n=r.a.useState(null),c=Object(p.a)(n,2),o=c[0],i=c[1],l=Boolean(o),s="primary-search-account-menu",u=r.a.createElement(ne.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:s,keepMounted:!0,color:"secondary",transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){i(null)}},r.a.createElement(te.a,{onClick:function(){i(null),a()}},"Logout"));return r.a.createElement(Q.a,{className:t.menu,position:"sticky"},r.a.createElement(ee.a,null,r.a.createElement(ae.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(ce.a,null)),r.a.createElement(z.a,{className:t.title,variant:"h6",noWrap:!0},"Shinkansen"),r.a.createElement("div",{className:t.sectionDesktop},r.a.createElement(ae.a,{edge:"end","aria-label":"account of current user","aria-controls":s,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement($.a,null)))),u)}),le=t(130),se=t(287),ue=t(95),me=t(639),pe=t(307),de=t.n(pe),fe=function(e){return Object(R.b)(function(e){return{auth:e.firebaseReducer.auth}})(function(a){return Object(n.useEffect)(function(){a.auth.isLoaded&&a.auth.isEmpty&&a.history.push("/")},[a.auth,a.history]),r.a.createElement(e,a)})},Ee=t(636),he=t(647),be=t(648),ge=t(629),ye=t(594),ve=t(637),Oe=t(638),Re=t(310),Ie=t.n(Re),we=t(309),ke=t.n(we),xe=t(33),je=t(304),_e=t.n(je),Se=t(305),Ne=t.n(Se),Ce=Object(b.a)(function(e){return{root:{width:"600px",height:"400px",overflow:"scroll",display:"flex",alignItems:"center",flexDirection:"column",backgroundColor:e.palette.background.paper},listItem:{"&:hover":{cursor:"initial",backgroundColor:"transparent"}},container:{display:"flex",padding:"10px 0px",alignItems:"center"},checkedIcon:{fill:"#30ae43"}}});var Pe=Object(R.b)(function(e){var a,t;return{auth:e.firebaseReducer.auth,profile:e.firebaseReducer.profile,username:null===(a=e.firebaseReducer)||void 0===a?void 0:null===(t=a.profile)||void 0===t?void 0:t.username,octokit:e.octokitReducer.octokit}})(function(e){var a=e.auth,t=e.profile,n=e.username,c=e.connectedApps,o=e.octokit,i=r.a.useState([]),l=Object(p.a)(i,2),s=l[0],m=l[1],d=Object(X.useFirebase)(),f=Ce();r.a.useEffect(function(){!function(){var e,a;u.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(o.repos.list({sort:"updated"}));case 2:e=t.sent,a=e.data,m(a);case 5:case"end":return t.stop()}})}()},[o.repos]);return r.a.createElement(ge.a,{className:f.root,component:"nav"},s.length?s.map(function(e){var i=c.some(function(a){return a.id===e.id});return r.a.createElement(ye.a,{key:e.name,divider:!0,className:f.listItem,button:!0},r.a.createElement(Ee.a,{className:f.container,maxWidth:"lg"},r.a.createElement(ve.a,null,i?r.a.createElement(_e.a,{className:f.checkedIcon}):r.a.createElement(Ne.a,{color:"secondary"})),r.a.createElement(Oe.a,{primary:"".concat(n,"/").concat(e.name)}),r.a.createElement(g.a,{disabled:i,variant:"outlined",color:"secondary",onClick:function(){return function(e){d.push("applications/".concat(a.uid),e),o.repos.createHook({owner:t.username,repo:e.name,events:["deployment","deployment_status"],config:{url:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_SERVER_DOMAIN,"/"),content_type:"json",secret:"bonjour"}})}(e)}},i?"Connected":"Connect")))}):r.a.createElement(O.a,{color:"secondary"}))}),Ae=Object(b.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},listItem:{"&:hover":{backgroundColor:e.palette.primary.light}},icon:{marginRight:e.spacing(.5),width:20,height:20},link:{textDecoration:"none",display:"flex",alignItems:"center"},inputRoot:{color:"inherit"},inputInput:Object(V.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("lg"),{width:200}),search:{position:"sticky",background:"transparent",top:0,borderRadius:e.shape.borderRadius,border:"1px solid ".concat(e.palette.primary.dark),width:"100%"},searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},container:{display:"flex",alignItems:"center"}}});var Le=Object(xe.d)(Object(R.b)(function(e){return{auth:e.firebaseReducer.auth}}),fe)(function(e){var a=e.auth,t=e.history;Object(X.useFirebaseConnect)(["applications/".concat(a.uid)]);var n=Object(R.c)(function(e){var t=e.firebaseReducer.data;return t.applications&&t.applications[a.uid]}),c=r.a.useState(null),o=Object(p.a)(c,2),l=o[0],s=o[1],u=n?Object.entries(n).reduce(function(e,a){var t=Object(p.a)(a,2),n=t[0],r=t[1];return[].concat(Object(ue.a)(e),[Object(m.a)({},r,{uid:n})])},[]):[],d=Ae(),f=Boolean(l),E=f?"simple-popper":void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{bgcolor:"primary.light",p:2},r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(M.a,{display:"flex",alignItems:"center"},r.a.createElement(he.a,null,r.a.createElement(i.b,{to:"/",className:d.link},r.a.createElement($.a,{className:d.icon}),"Personnal")),r.a.createElement(M.a,{marginLeft:"auto"},r.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(e){s(l?null:e.currentTarget)},endIcon:r.a.createElement(de.a,null)},"New"),r.a.createElement(me.a,{id:E,open:f,placement:"bottom-end",anchorEl:l},r.a.createElement(Y.a,null,r.a.createElement(Pe,{connectedApps:u}))))))),u.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{pt:6,pb:3},r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement("div",{className:d.search},r.a.createElement("div",{className:d.searchIcon},r.a.createElement(ke.a,null)),r.a.createElement(be.a,{placeholder:"Search\u2026",classes:{root:d.inputRoot,input:d.inputInput},inputProps:{"aria-label":"search"}})))),r.a.createElement(ge.a,{className:d.root,component:"nav","aria-label":"main mailbox folders"},u.map(function(e){return r.a.createElement(ye.a,{key:e.name,divider:!0,className:d.listItem,button:!0,onClick:function(){return function(e){var a=e.uid;t.push("/application/".concat(a))}(e)}},r.a.createElement(Ee.a,{className:d.container,maxWidth:"lg"},r.a.createElement(ve.a,null,r.a.createElement(Ie.a,{color:"secondary"})),r.a.createElement(Oe.a,{primary:e.name})))}))):r.a.createElement(Ee.a,null,r.a.createElement("p",null,"There's no connected app")))}),De=t(311),Te=t.n(De),Ue=t(316),Be=t.n(Ue),Fe=t(317),Ve=t.n(Fe),We=t(644),Ge=t(642),Me=t(312),Ye=t.n(Me),ze=t(640),Ke=t(313),He=t.n(Ke),Je=t(641),$e=t(649),Xe=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"created_at";return e&&e.sort(function(e,t){return new Date(t[a]).getTime()-new Date(e[a]).getTime()})},Ze=function(e){return!["success","failure"].includes(e)},qe=Object(b.a)(function(e){return{listItemIcon:{minWidth:"auto",marginRight:e.spacing(2)},inline:{display:"inline"},login:{fontWeight:500},skeleton:{width:"100px",display:"inline-flex !important"},loader:{height:"10px",width:"24px"},blueLink:{color:"#006deb",marginLeft:e.spacing(.5)},icon:{marginRight:e.spacing(.5),width:20,height:20}}}),Qe=function(e){var a=e.status,t=e.deployments,n=qe();return r.a.createElement(ge.a,null,t.map(function(e){var t=Xe(a[e.id],"created_at"),c=t&&t[0]||{},o=new Date(e.created_at),l=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(o),s=function(e){switch(e){case"success":return{icon:r.a.createElement(Ye.a,{htmlColor:"green"}),color:"green"};case"failure":return{icon:r.a.createElement(He.a,{color:"error"}),color:"red"};case"pending":return{icon:r.a.createElement(ze.a,{className:n.loader,color:"secondary"}),color:"gold"};default:return{icon:r.a.createElement(ze.a,{className:n.loader,color:"secondary"}),color:"green"}}};return r.a.createElement(ye.a,{key:e.id,divider:!0,alignItems:"center"},r.a.createElement(ve.a,{className:n.listItemIcon},s(c.state).icon),r.a.createElement(Je.a,null,r.a.createElement($e.a,{src:e.creator.avatar_url})),r.a.createElement(Oe.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{component:"span",className:n.login},e.creator.login,":"," "),!c.state&&r.a.createElement(Ge.a,{component:"span",className:n.skeleton,animation:"wave"}),c.state&&r.a.createElement(z.a,{component:"span",variant:"body2",className:n.inline,style:{color:s(c.state).color}},"Build ",c.state)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,l),!Ze(c.state)&&r.a.createElement(i.b,{to:"/",className:n.blueLink,onClick:function(){console.info("I'm a button.")}},"View build log"))}))}))},ea=t(643),aa=t(314),ta=t.n(aa),na=t(315),ra=t.n(na),ca=t(196),oa=t.n(ca),ia=Object(b.a)(function(e){return{listItemIcon:{minWidth:"auto",marginRight:e.spacing(2)},inline:{display:"inline"},skeleton:{display:"inline-flex",width:"100px"},tag:{background:e.palette.primary.dark,borderRadius:"4px",padding:"4px 8px"}}}),la=function(e){var a=e.currentVersion,t=e.previousVersion,n=e.handleDeploy,c=e.handleRollback,o=e.isLoading,i=ia();return r.a.createElement(ge.a,{component:"nav","aria-label":"main mailbox folders"},r.a.createElement(ye.a,{divider:Boolean(t),alignItems:"center"},!a&&r.a.createElement(Oe.a,null,r.a.createElement(oa.a,{className:i.skeleton,animation:"wave"})),a&&a.name&&r.a.createElement(Oe.a,null,r.a.createElement(r.a.Fragment,null,"Current version"," ",r.a.createElement("span",{className:i.tag},a.name))),r.a.createElement(ea.a,null,r.a.createElement(g.a,{variant:"contained",color:"secondary",disabled:o,endIcon:r.a.createElement(ta.a,null),onClick:n},"Deploy new version"))),r.a.createElement(ye.a,{alignItems:"center"},!t&&r.a.createElement(Oe.a,null,r.a.createElement(oa.a,{className:i.skeleton,animation:"wave"})),t&&t.name&&r.a.createElement(Oe.a,null,r.a.createElement(r.a.Fragment,null,"Previous version"," ",r.a.createElement("span",{className:i.tag},t.name))),r.a.createElement(ea.a,null,r.a.createElement(g.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(ra.a,null),disabled:o||!t,onClick:c},"Rollback"))))},sa=function(e,a,t){var n,r,c,o;return u.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.username,r=t.name,i.next=4,u.a.awrap(e.repos.listDeployments({owner:n,repo:r,per_page:9}));case 4:return c=i.sent,o=c.data,i.abrupt("return",o);case 7:case"end":return i.stop()}})},ua=function(e,a,t){var n,r,c,o;return u.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.username,r=t.name,i.next=4,u.a.awrap(e.repos.listTags({owner:n,repo:r}));case 4:return c=i.sent,o=c.data,i.abrupt("return",o);case 7:case"end":return i.stop()}})},ma=function(e,a,t,n){var r,c,o,i;return u.a.async(function(l){for(;;)switch(l.prev=l.next){case 0:return r=t.username,c=n.name,l.next=4,u.a.awrap(a.repos.listDeploymentStatuses({owner:r,repo:c,deployment_id:e}));case 4:return o=l.sent,i=o.data,l.abrupt("return",i);case 7:case"end":return l.stop()}})},pa=Object(b.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},link:{textDecoration:"none",display:"flex",alignItems:"center"},blueLink:{color:"#006deb",marginLeft:e.spacing(.5)},icon:{marginRight:e.spacing(.5),width:20,height:20}}});var da=Object(xe.d)(Object(R.b)(function(e){return{auth:e.firebaseReducer.auth,profile:e.firebaseReducer.profile,octokit:e.octokitReducer.octokit}}),fe)(function(e){var a=e.auth,t=e.profile,n=e.octokit,c=e.history,o=pa(),s=Object(X.useFirebase)(),d=r.a.useState([]),E=Object(p.a)(d,2),h=E[0],b=E[1],y=r.a.useState({}),v=Object(p.a)(y,2),O=v[0],I=v[1],w=r.a.useState([]),k=Object(p.a)(w,2),x=k[0],j=k[1],_=Object(l.f)().uid;Object(X.useFirebaseConnect)(["applications/".concat(a.uid,"/").concat(_)]);var S=Object(R.c)(function(e){var t=e.firebaseReducer.data;return t.applications&&t.applications[a.uid]&&t.applications[a.uid][_]}),N=x[0]||null,C=x[1]||null;r.a.useEffect(function(){Te.a.connect(Object({NODE_ENV:"production",PUBLIC_URL:"/Shinkansen"}).REACT_APP_SERVER_DOMAIN).on("event",function(e){var a=e.body,t=a.deployment,n=a.deployment_status;!t||n?I(function(e){if(e)return Object(m.a)({},e,Object(V.a)({},a.deployment.id,[].concat(Object(ue.a)(e[a.deployment.id]),[a.deployment_status])))}):b(function(e){return[].concat(Object(ue.a)(e),[a.deployment])})})},[]),r.a.useEffect(function(){S&&n&&(function(){var e;u.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(sa(n,t,S));case 2:e=a.sent,b(e);case 4:case"end":return a.stop()}})}(),function(){var e;u.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(ua(n,t,S));case 2:e=a.sent,j(e);case 4:case"end":return a.stop()}})}())},[S,n,t,t.username]),r.a.useEffect(function(){h.map(function(e){var a,r;return u.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return a=e.id,c.next=3,u.a.awrap(ma(a,n,t,S));case 3:r=c.sent,I(function(e){return Object(m.a)({},e,Object(V.a)({},a,r))});case 5:case"end":return c.stop()}})})},[h]);var P=Xe(h),A=function(e,a){var t,n;return Object.keys(e).length&&a.length&&(null===(t=e[a[0].id])||void 0===t?void 0:t.length)&&(null===(n=Xe(e[a[0].id])[0])||void 0===n?void 0:n.state)}(O,P),L=Ze(A);return S?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{bgcolor:"primary.light",p:2,marginBottom:6},r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(M.a,{display:"flex",alignItems:"center"},r.a.createElement(he.a,{separator:r.a.createElement(Be.a,null),"aria-label":"breadcrumb"},r.a.createElement(i.b,{to:"/",className:o.link},r.a.createElement(M.a,{display:"flex",marginRight:1},r.a.createElement($.a,null)),r.a.createElement(z.a,{color:"textPrimary"},"Personnal")),r.a.createElement(M.a,{display:"flex"},r.a.createElement(M.a,{display:"flex",marginRight:1},r.a.createElement(f.a,{fontSize:"small"})),r.a.createElement(z.a,{color:"textPrimary"},S.name))),r.a.createElement(M.a,{marginLeft:"auto"},r.a.createElement(g.a,{variant:"contained",color:"secondary",endIcon:r.a.createElement(Ve.a,null),onClick:function(){s.remove("applications/".concat(a.uid,"/").concat(_)),c.push("/")}},"Delete"))))),r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(We.a,{container:!0,justify:"space-between",spacing:6},r.a.createElement(We.a,{item:!0,xs:12,md:6},r.a.createElement(M.a,{marginBottom:2},r.a.createElement(z.a,null,"Deployments commands")),r.a.createElement(Y.a,null,r.a.createElement(la,{isLoading:L,currentVersion:N,previousVersion:C,handleDeploy:function(){return u.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(n.repos.createDeployment({owner:t.username,repo:S.name,ref:"master"}));case 2:case"end":return e.stop()}})},handleRollback:function(){var e,a;return u.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.awrap(ua(n,t,S));case 2:e=r.sent,a=e[1],n.repos.createDeployment({owner:t.username,repo:S.name,ref:a.commit.sha,auto_merge:!1}),j(e);case 6:case"end":return r.stop()}})}}))),r.a.createElement(We.a,{item:!0,xs:12,md:6},r.a.createElement(z.a,null,"Deployments activity"),r.a.createElement(Qe,{status:O,deployments:P}))))):null}),fa=Object(le.a)({typography:{fontFamily:"Helvetica",fontWeightLight:300,fontWeightRegular:300,fontWeightMedium:300,fontWeightBold:300},palette:{text:{primary:"#62738d"},primary:{main:"#ffffff",light:"#f7f8fb",dark:"#e7ebf3",contrastText:"#8b6baf"},secondary:{main:"#8b6baf",contrastText:"#e7ebf3"}}});var Ea=Object(R.b)(function(e){return{profile:e.firebaseReducer.profile}},function(e){return{loadOctokit:function(a){return e(D(a,e))}}})(function(e){var a=e.profile,t=e.loadOctokit;r.a.useEffect(function(){a.accessToken&&t(a.accessToken)},[a,t]);var n=Object(R.c)(function(e){return e.firebaseReducer.auth});return r.a.createElement(se.a,{theme:fa},Object(X.isLoaded)(n)&&!Object(X.isEmpty)(n)&&r.a.createElement(ie,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:function(e){return function(e,a){return Object(X.isLoaded)(a)?Object(X.isEmpty)(a)?r.a.createElement(q,e):r.a.createElement(Le,e):r.a.createElement(O.a,{color:"secondary"})}(e,n)}}),r.a.createElement(l.a,{path:"/login",component:q}),r.a.createElement(l.a,{path:"/application/:uid",component:da})))}),ha=t(318),ba={authMsg:""},ga={apiCallsInProgress:0};var ya=t(319),va=t.n(ya),Oa={},Ra=Object(xe.c)({firebaseReducer:X.firebaseReducer,authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case x:case j:return Object(m.a)({},e,{authMsg:""});case k:case"SIGNUP_ERROR":case"SIGNIN_ERROR":case"EMAIL_NOT_VERIFIED":case"SIGNOUT_ERROR":case _:case"RESET_ERROR":return Object(m.a)({},e,{authMsg:a.payload});default:return e}},octokitReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOAD_OCTOKIT":var t=new va.a({auth:a.payload});return Object(m.a)({},e,{octokit:t});default:return e}},apiStatusReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga;switch((arguments.length>1?arguments[1]:void 0).type){case I:return Object(m.a)({},e,{apiCallsInProgress:1});case w:case x:case k:case _:case j:return Object(m.a)({},e,{apiCallsInProgress:0});default:return e}}}),Ia=Object(xe.e)(Ra,{},Object(xe.d)(Object(xe.a)(ha.a))),wa={firebase:L,config:{userProfile:"users"},dispatch:Ia.dispatch};o.a.render(r.a.createElement(R.a,{store:Ia},r.a.createElement(X.ReactReduxFirebaseProvider,wa,r.a.createElement(i.a,null,r.a.createElement(Ea,null)))),document.getElementById("root"))}},[[327,1,2]]]);
//# sourceMappingURL=main.fb8db337.chunk.js.map